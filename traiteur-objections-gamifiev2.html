<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N.O.E. | INTERFACE by Ushindi.io</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #009688;
            --dark-green: #00695C;
            --black: #000000;
            --white: #FFFFFF;
            --light-bg: #F8F9FA;
            --text-dark: #212529;
            --text-muted: #6C757D;
            --border-light: #DEE2E6;
            --success: #28A745;
            --warning: #FFC107;
            --gradient-primary: linear-gradient(135deg, #009688 0%, #00695C 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #F8F9FA 0%, #E9ECEF 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* √âCRAN D'ACCUEIL PLEIN √âCRAN */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #009688 0%, #00695C 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            color: white;
            text-align: center;
        }

        .welcome-screen.hidden {
            display: none;
        }

        .banner-image {
            width: 400px;
            max-width: 80vw;
            height: auto;
            margin-bottom: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .welcome-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            margin-bottom: 50px;
            opacity: 0.9;
            max-width: 600px;
        }

        .start-btn {
            padding: 20px 50px;
            font-size: 1.5rem;
            font-weight: 600;
            background: white;
            color: var(--primary-green);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }

        .start-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        /* √âCRANS DE TRANSITION */
        .transition-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #009688 0%, #00695C 100%);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
            color: white;
            text-align: center;
        }

        .transition-screen.show {
            display: flex;
        }

        .transition-mascotte {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin-bottom: 30px;
            animation: bounce 1s infinite;
        }

        .transition-message {
            font-size: 1.8rem;
            font-weight: 600;
            max-width: 600px;
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-20px);
            }

            60% {
                transform: translateY(-10px);
            }
        }

        /* √âCRAN DE CHARGEMENT */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #009688 0%, #00695C 100%);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
            color: white;
            text-align: center;
        }

        .loading-screen.show {
            display: flex;
        }

        .loading-mascotte {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin-bottom: 40px;
            animation: rotate 2s linear infinite;
        }

        .loading-title {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .loading-message {
            font-size: 1.2rem;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .progress-bar-container {
            width: 400px;
            max-width: 80vw;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 100%;
            background: white;
            border-radius: 10px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .loading-status {
            font-size: 1rem;
            opacity: 0.8;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* INTERFACE PRINCIPALE */
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* MASCOTTE ACCOMPAGNATRICE */
        .companion-mascotte {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 120px;
            height: 120px;
            border-radius: 50%;
            z-index: 100;
            transition: all 0.5s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(-50%) translateX(0);
            }

            50% {
                transform: translateY(-50%) translateX(10px);
            }
        }

        /* Header avec logo et avatar */
        .header {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .logo-circle {
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            box-shadow: 0 4px 16px rgba(0, 150, 136, 0.3);
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--black);
            letter-spacing: -0.5px;
        }

        .crown {
            width: 24px;
            height: 24px;
            fill: var(--white);
        }

        .avatar-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid var(--primary-green);
            object-fit: cover;
        }

        .profile-info h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--black);
            margin-bottom: 5px;
        }

        .profile-info p {
            color: var(--text-muted);
            font-size: 14px;
        }

        /* Progress bar */
        .progress-container {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-title {
            font-weight: 600;
            color: var(--text-dark);
        }

        .progress-percentage {
            font-weight: 700;
            color: var(--primary-green);
        }

        .progress-track {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--border-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--text-muted);
            position: relative;
            transition: all 0.3s ease;
        }

        .progress-step.active {
            background: var(--primary-green);
            color: var(--white);
            box-shadow: 0 0 0 4px rgba(0, 150, 136, 0.2);
        }

        .progress-step.completed {
            background: var(--primary-green);
            color: var(--white);
        }

        .progress-step::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 40px;
            height: 2px;
            background: var(--border-light);
            transform: translateY(-50%);
            transition: all 0.3s ease;
        }

        .progress-step:last-child::after {
            display: none;
        }

        .progress-step.active::after,
        .progress-step.completed::after {
            background: var(--primary-green);
        }

        .progress-label {
            font-size: 12px;
            color: var(--text-muted);
            text-align: center;
            margin-top: 8px;
        }

        /* Card principale */
        .main-card {
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            flex: 1;
            overflow: hidden;
        }

        /* √âtapes */
        .step {
            padding: 40px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--black);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .step-number {
            width: 35px;
            height: 35px;
            background: var(--gradient-primary);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 15px;
            font-size: 16px;
        }

        .step-subtitle {
            color: var(--text-muted);
            font-size: 16px;
            margin-bottom: 30px;
        }

        /* Formulaires */
        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 14px;
        }

        select,
        input,
        textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-light);
            border-radius: 10px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            background: var(--white);
            transition: all 0.3s ease;
        }

        select:focus,
        input:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(0, 150, 136, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Options radio/checkbox */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .radio-option,
        .checkbox-option {
            padding: 15px 20px;
            border: 2px solid var(--border-light);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--white);
            position: relative;
        }

        .radio-option:hover,
        .checkbox-option:hover {
            border-color: var(--primary-green);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 150, 136, 0.1);
        }

        .radio-option.selected,
        .checkbox-option.selected {
            border-color: var(--primary-green);
            background: rgba(0, 150, 136, 0.05);
        }

        .radio-option input,
        .checkbox-option input {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .option-title {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .option-description {
            font-size: 13px;
            color: var(--text-muted);
        }

        /* Boutons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--gradient-primary);
            color: var(--white);
            box-shadow: 0 4px 16px rgba(0, 150, 136, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--text-dark);
            border: 2px solid var(--border-light);
            box-shadow: none;
        }

        .btn-secondary:hover {
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn-group .btn {
            flex: 1;
            max-width: 150px;
        }

        /* Champs conditionnels */
        .conditional-field {
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            opacity: 0;
        }

        .conditional-field.show {
            max-height: 500px;
            opacity: 1;
            margin-top: 20px;
        }

        /* √âtape finale */
        .result-container {
            text-align: center;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: 0 8px 24px rgba(0, 150, 136, 0.3);
        }

        .prompt-container {
            background: var(--light-bg);
            border: 2px solid var(--border-light);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            max-height: 400px;
            overflow-y: auto;
        }

        .prompt-text {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .copy-btn {
            background: var(--success);
            margin-top: 15px;
        }

        .copy-btn.copied {
            background: var(--warning);
        }

        /* Notification d'erreur */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--warning);
            color: var(--white);
            border-radius: 10px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .notification.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .step {
                padding: 30px 20px;
            }

            .welcome-title {
                font-size: 2.5rem;
            }

            .companion-mascotte {
                width: 80px;
                height: 80px;
                right: 10px;
            }

            .banner-image {
                width: 300px;
            }
        }

        /* Boutons allong√©s */
        .btn-group .btn {
            flex: 1;
            max-width: none;
            min-width: 180px;
            font-size: 1.1rem;
            padding: 16px 0;
        }

        /* Effet futuriste pour NO OBJECTIONS ENGINE */
        .btn-futuristic {
            background: linear-gradient(90deg, #00ffe7 0%, #009688 100%);
            color: #222;
            font-weight: 700;
            letter-spacing: 2px;
            box-shadow: 0 0 20px #00ffe7, 0 0 40px #009688;
            border: 2px solid #00ffe7;
            text-transform: uppercase;
            transition: all 0.3s cubic-bezier(.25, .8, .25, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-futuristic:hover {
            background: linear-gradient(90deg, #009688 0%, #00ffe7 100%);
            color: #fff;
            box-shadow: 0 0 40px #00ffe7, 0 0 60px #009688;
            border-color: #009688;
            transform: scale(1.05);
        }

        .btn-futuristic::after {
            content: '';
            position: absolute;
            left: -50%;
            top: 0;
            width: 200%;
            height: 100%;
            background: rgba(0, 255, 231, 0.08);
            transform: skewX(-20deg);
            transition: left 0.5s;
            z-index: 0;
        }

        .btn-futuristic:hover::after {
            left: 0;
        }

        .btn-futuristic span {
            position: relative;
            z-index: 1;
        }

        @media (max-width: 600px) {
            .btn-group {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }

            .btn-group .btn {
                min-width: 0;
                width: 100%;
                font-size: 1rem;
                padding: 14px 0;
                box-sizing: border-box;
            }
        }
    </style>
</head>

<body>
    <!-- √âCRAN D'ACCUEIL PLEIN √âCRAN -->
    <div class="welcome-screen" id="welcomeScreen">
        <img src="banner t-o.png" alt="Banner Traiteur d'objections" class="banner-image">
        <h1 class="welcome-title">NO OBJECTIONS ENGINE</h1>
        <p class="welcome-subtitle">Supprime tes blocages. Vends plus vite. Conclus maintenant.</p>
        <button class="start-btn" onclick="startApp()">JE DIS OUI !</button>
    </div>

    <!-- √âCRANS DE TRANSITION -->
    <div class="transition-screen" id="transitionScreen">
        <img src="mascotte_accueil.png" alt="Mascotte" class="transition-mascotte" id="transitionMascotte">
        <p class="transition-message" id="transitionMessage"></p>
    </div>

    <!-- √âCRAN DE CHARGEMENT -->
    <div class="loading-screen" id="loadingScreen">
        <img src="mascotte_finale.png" alt="Mascotte r√©flexion" class="loading-mascotte">
        <h2 class="loading-title">G√©n√©ration en cours...</h2>
        <p class="loading-message" id="loadingMessage">Analyse de vos r√©ponses...</p>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <p class="loading-status" id="loadingStatus">0%</p>
    </div>

    <!-- NOTIFICATION D'ERREUR -->
    <div class="notification" id="notification"></div>

    <!-- MASCOTTE ACCOMPAGNATRICE -->
    <img src="mascotte_accueil.png" alt="Mascotte" class="companion-mascotte" id="companionMascotte">

    <!-- INTERFACE PRINCIPALE -->
    <div class="container" id="mainContainer" style="display: none;">
        <!-- Header avec logo et avatar -->
        <div class="header">
            <div class="logo">
                <div class="logo-circle">
                    <svg class="crown" viewBox="0 0 24 24">
                        <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" />
                    </svg>
                </div>
                <span class="logo-text">Ushindi.io</span>
            </div>

            <div class="avatar-container">
                <img src="avatar.png" alt="Avatar" class="avatar">
                <div class="profile-info">
                    <h3>Assistant Expert</h3>
                    <p>Sp√©cialiste en traitement d'objections</p>
                </div>
            </div>
        </div>

        <!-- Barre de progression -->
        <div class="progress-container">
            <div class="progress-text">
                <span class="progress-title">Progression</span>
                <span class="progress-percentage" id="progressPercentage">0%</span>
            </div>

            <div class="progress-track">
                <div class="progress-step active" data-step="1">1</div>
                <div class="progress-step" data-step="2">2</div>
                <div class="progress-step" data-step="3">3</div>
                <div class="progress-step" data-step="4">4</div>
                <div class="progress-step" data-step="5">5</div>
            </div>

            <div class="progress-label" id="progressLabel">Contexte g√©n√©ral</div>
        </div>

        <!-- Carte principale avec les √©tapes -->
        <div class="main-card">
            <!-- √âtape 1: Contexte g√©n√©ral -->
            <div class="step active" id="step-1">
                <div class="step-title">
                    <div class="step-number">1</div>
                    Contexte g√©n√©ral
                </div>
                <p class="step-subtitle">√ätes-vous confront√© √† une objection r√©elle ou pr√©parez-vous une phase de
                    prospection ?</p>

                <div class="options-grid">
                    <div class="radio-option" onclick="selectRadio('contextType', 'objection')">
                        <input type="radio" name="contextType" value="objection">
                        <div class="option-title">üö´ Je fais face √† une objection actuelle</div>
                        <div class="option-description">Vous √™tes en train de g√©rer une objection dans une conversation
                            commerciale</div>
                    </div>

                    <div class="radio-option" onclick="selectRadio('contextType', 'prospection')">
                        <input type="radio" name="contextType" value="prospection">
                        <div class="option-title">üìã Je pr√©pare une phase de prospection</div>
                        <div class="option-description">Vous pr√©parez un script ou une approche pour anticiper les
                            objections</div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn" onclick="nextStep()" id="step1-next">Continuer</button>
                </div>
            </div>

            <!-- √âtape 2: Nature de l'objection (combin√©e) -->
            <div class="step" id="step-2">
                <div class="step-title">
                    <div class="step-number">2</div>
                    Nature de l'objection
                </div>
                <p class="step-subtitle" id="step2-subtitle">D√©crivez votre situation et s√©lectionnez les types
                    d'objections pertinents</p>

                <!-- Phase de texte -->
                <div class="form-group">
                    <label for="objectionDescription" id="objectionDescriptionLabel">D√©crivez l'objection que vous
                        rencontrez :</label>
                    <textarea id="objectionDescription" name="objectionDescription"
                        placeholder="D√©crivez pr√©cis√©ment l'objection ou la situation que vous rencontrez..."></textarea>
                </div>

                <!-- Grille de choix multiples -->
                <div class="form-group">
                    <label>Quels th√®mes d'objections vous redoutez de rencontrer ou correspondent bien √† votre situation
                        :</label>
                    <div class="options-grid">
                        <div class="checkbox-option" onclick="toggleCheckbox('objectionTypes', 'prix')">
                            <input type="checkbox" name="objectionTypes" value="prix">
                            <div class="option-title">üí∞ Prix</div>
                            <div class="option-description">"C'est trop cher", "Le budget n'est pas disponible", "Vos
                                concurrents sont moins chers"</div>
                        </div>

                        <div class="checkbox-option" onclick="toggleCheckbox('objectionTypes', 'delai')">
                            <input type="checkbox" name="objectionTypes" value="delai">
                            <div class="option-title">‚è∞ D√©lai</div>
                            <div class="option-description">"Ce n'est pas le bon moment", "Il faut attendre", "On va
                                r√©fl√©chir"</div>
                        </div>

                        <div class="checkbox-option" onclick="toggleCheckbox('objectionTypes', 'confiance')">
                            <input type="checkbox" name="objectionTypes" value="confiance">
                            <div class="option-title">ü§ù Manque de confiance</div>
                            <div class="option-description">"On ne vous conna√Æt pas", "Vos r√©f√©rences ne nous
                                convainquent pas", "Et si √ßa ne marche pas ?"</div>
                        </div>

                        <div class="checkbox-option" onclick="toggleCheckbox('objectionTypes', 'besoin')">
                            <input type="checkbox" name="objectionTypes" value="besoin">
                            <div class="option-title">‚ùì Besoin flou</div>
                            <div class="option-description">"Je ne vois pas l'int√©r√™t", "√áa ne correspond pas √† nos
                                besoins", "On n'a pas besoin de √ßa"</div>
                        </div>

                        <div class="checkbox-option" onclick="toggleCheckbox('objectionTypes', 'autorite')">
                            <input type="checkbox" name="objectionTypes" value="autorite">
                            <div class="option-title">üë§ Manque d'autorit√©</div>
                            <div class="option-description">"Ce n'est pas moi qui d√©cide", "Je dois en parler √† mon
                                sup√©rieur", "Je ne suis pas le bon interlocuteur"</div>
                        </div>

                        <div class="checkbox-option" onclick="toggleCheckbox('objectionTypes', 'urgence')">
                            <input type="checkbox" name="objectionTypes" value="urgence">
                            <div class="option-title">‚è±Ô∏è Absence d'urgence</div>
                            <div class="option-description">"On n'est pas press√©", "On verra √ßa plus tard", "Ce n'est
                                pas une priorit√© pour le moment"</div>
                        </div>
                    </div>
                </div>

                <div class="form-group conditional-field" id="otherObjectionField">
                    <label for="otherObjection">Autre type d'objection (optionnel) :</label>
                    <input type="text" id="otherObjection" name="otherObjection"
                        placeholder="D√©crivez un autre type d'objection">
                </div>

                <div class="btn-group">
                    <button class="btn" onclick="nextStep()" id="step2-next">Continuer</button>
                    <button class="btn btn-secondary" onclick="prevStep()">Retour</button>
                </div>
            </div>

            <!-- √âtape 3: Contexte de l'interaction -->
            <div class="step" id="step-3">
                <div class="step-title">
                    <div class="step-number">3</div>
                    Contexte de l'interaction
                </div>
                <p class="step-subtitle" id="step3-subtitle">D√©crivez le contexte dans lequel cette objection survient
                    ou pourrait survenir</p>

                <div class="form-group">
                    <label for="channel">Par quel canal vous communiquez ?</label>
                    <select id="channel" name="channel" required>
                        <option value="">S√©lectionnez le canal</option>
                        <option value="telephone">T√©l√©phone</option>
                        <option value="email">Email</option>
                        <option value="visio">Visioconf√©rence</option>
                        <option value="personne">En personne</option>
                        <option value="chat">SMS ou R√©seaux Sociaux</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="prospectAuthority">Niveau d'autorit√© de votre interlocuteur :</label>
                    <select id="prospectAuthority" name="prospectAuthority" required>
                        <option value="">S√©lectionnez le niveau</option>
                        <option value="eleve">√âlev√© (peut d√©cider seul)</option>
                        <option value="moyen">Moyen (influence la d√©cision)</option>
                        <option value="bas">Bas (simple informateur)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="phase">√Ä quelle phase du cycle de vente √™tes-vous ?</label>
                    <select id="phase" name="phase" required>
                        <option value="">S√©lectionnez la phase</option>
                        <option value="prise-contact">Prise de contact</option>
                        <option value="presentation">Pr√©sentation</option>
                        <option value="negociation">N√©gociation</option>
                        <option value="closing">Closing</option>
                        <option value="relance">Relance</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="prospectRole">Quel r√¥le joue votre interlocuteur ?</label>
                    <select id="prospectRole" name="prospectRole" required>
                        <option value="">S√©lectionnez le r√¥le</option>
                        <option value="decideur">D√©cideur Unique | Final</option>
                        <option value="influenceur">Influenceur | Conseiller important</option>
                        <option value="autre">Autre | Inconnu</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="prospectTemperature">Comment qualifieriez-vous ce prospect ?</label>
                    <select id="prospectTemperature" name="prospectTemperature" required>
                        <option value="">S√©lectionnez la qualification</option>
                        <option value="froid">Prospect froid</option>
                        <option value="tiede">Prospect ti√®de</option>
                        <option value="chaud">Prospect chaud</option>
                    </select>
                </div>

                <div class="btn-group">
                    <button class="btn" onclick="nextStep()">Continuer</button>
                    <button class="btn btn-secondary" onclick="prevStep()">Retour</button>
                </div>
            </div>

            <!-- √âtape 4: Intention strat√©gique (adaptative) -->
            <div class="step" id="step-4">
                <div class="step-title">
                    <div class="step-number">4</div>
                    <span id="step4-title">Intention strat√©gique</span>
                </div>
                <p class="step-subtitle" id="step4-subtitle">Quelle est votre intention principale face √† cette
                    objection ?</p>

                <!-- Contenu pour "Je fais face √† une objection actuelle" -->
                <div id="objectionPathContent">
                    <!-- Phase de r√©daction -->
                    <div class="form-group">
                        <label for="responseDraft">R√©digez votre plan d'action</label>
                        <textarea id="responseDraft" name="responseDraft"
                            placeholder="D√©crivez, avec vos mots, ce que vous aimeriez bien r√©pondre ou ce que vous aimeriez faire comprendre a votre prospect..."></textarea>
                    </div>

                    <!-- Phase de s√©lection de strat√©gies -->
                    <div class="form-group">
                        <label>S√©lectionnez les strat√©gies que vous souhaitez utiliser :</label>
                        <div class="options-grid">
                            <div class="checkbox-option" onclick="toggleCheckbox('strategies', 'desamorcer')">
                                <input type="checkbox" name="strategies" value="desamorcer">
                                <div class="option-title">üïäÔ∏è D√©samorcer calmement</div>
                                <div class="option-description">Apaiser l'objection et maintenir le dialogue sans
                                    confrontation</div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('strategies', 'reformuler')">
                                <input type="checkbox" name="strategies" value="reformuler">
                                <div class="option-title">üîç Reformuler pour mieux comprendre</div>
                                <div class="option-description">Comprendre le v√©ritable enjeu derri√®re l'objection</div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('strategies', 'contre-argumenter')">
                                <input type="checkbox" name="strategies" value="contre-argumenter">
                                <div class="option-title">‚ö° Contre-argumenter efficacement</div>
                                <div class="option-description">Apporter des preuves et arguments pour surmonter
                                    l'objection</div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('strategies', 'diagnostiquer')">
                                <input type="checkbox" name="strategies" value="diagnostiquer">
                                <div class="option-title">ü©∫ Diagnostiquer la cause racine</div>
                                <div class="option-description">Identifier la v√©ritable cause et proposer une solution
                                    adapt√©e</div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('strategies', 'relational')">
                                <input type="checkbox" name="strategies" value="relational">
                                <div class="option-title">ü§ù Renforcer la relation</div>
                                <div class="option-description">Construire la confiance et le lien avec le prospect
                                </div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('strategies', 'urgent')">
                                <input type="checkbox" name="strategies" value="urgent">
                                <div class="option-title">‚è∞ Cr√©er un sentiment d'urgence</div>
                                <div class="option-description">Montrer pourquoi une action rapide est n√©cessaire</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenu pour "Je pr√©pare une phase de prospection" -->
                <div id="prospectionPathContent" style="display: none;">
                    <div class="form-group">
                        <label for="prospectionScript">√âxpliquez votre strat√©gie de prospection:</label>
                        <textarea id="prospectionScript" name="prospectionScript"
                            placeholder="√âxpliquez votre strat√©gie de prospection, votre message d'approche, fil rouge ou pitch commercial..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Quels sont les 1 ou 2 objectifs principaux de cette strat√©gie ?</label>
                        <div class="options-grid">
                            <div class="checkbox-option" onclick="toggleCheckbox('prospectionGoal', 'rdv')">
                                <input type="checkbox" name="prospectionGoal" value="rdv">
                                <div class="option-title">üìÖ Obtenir un rendez-vous</div>
                                <div class="option-description">Le but principal est de fixer un rendez-vous pour
                                    pr√©senter l'offre</div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('prospectionGoal', 'info')">
                                <input type="checkbox" name="prospectionGoal" value="info">
                                <div class="option-title">üìä Fournir des informations</div>
                                <div class="option-description">Partager des informations pour susciter l'int√©r√™t</div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('prospectionGoal', 'demo')">
                                <input type="checkbox" name="prospectionGoal" value="demo">
                                <div class="option-title">üéØ Obtenir une d√©monstration</div>
                                <div class="option-description">Convaincre le prospect d'assister √† une d√©mo</div>
                            </div>

                            <div class="checkbox-option" onclick="toggleCheckbox('prospectionGoal', 'vente')">
                                <input type="checkbox" name="prospectionGoal" value="vente">
                                <div class="option-title">üí∞ Conclure une vente directe</div>
                                <div class="option-description">Vendre directement via ce premier contact</div>
                            </div>
                        </div>
                    </div>

                    <!-- √âtape 5: R√©sultat final -->
                    <div class="step" id="step-5">
                        <div class="result-container">
                            <div class="success-icon">
                                <svg width="40" height="40" fill="white" viewBox="0 0 24 24">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <h2 class="step-title" style="justify-content: center; margin-bottom: 20px;">
                                <strong>Votre plan anti-objections est pr√™t suivez ces 3 √©tapes</strong>
                            </h2>
                            <p class="step-subtitle"><br> 1Ô∏è‚É£üëâChargez votre configuration <br> 2Ô∏è‚É£üëâCliquez sur le
                                bouton "NO
                                OBJECTIONS
                                ENGINE" <br>3Ô∏è‚É£üëâCollez-tout et commencez √† travailler </p>

                            <!-- R√©sum√© des choix -->
                            <div
                                style="margin-top: 40px; padding: 20px; background: var(--light-bg); border-radius: 15px; text-align: left;">
                                <h3 style="margin-bottom: 15px; color: var(--primary-green);">üìä R√©sum√© de votre
                                    configuration
                                </h3>
                                <div id="summary-content">
                                    <!-- Le r√©sum√© sera g√©n√©r√© ici -->
                                </div>
                            </div>

                            <div class="btn-group" style="margin-top: 30px;">
                                <button class="btn copy-btn" id="copyPromptBtn" onclick="copyPrompt()">1Ô∏è‚É£ Charger
                                    configuration</button>
                                <a href="https://chatgpt.com/g/g-689526a65fb881919cd9591e5fee2f71-no-objections-engine"
                                    target="_blank" class="btn btn-futuristic"><span>2Ô∏è‚É£NO OBJECTIONS ENGINE</span></a>
                            </div>
                            <div style="margin-top: 30px;">
                                <button class="btn btn-secondary" onclick="prevStep()">Retour</button>
                            </div>

                            <div class="prompt-container" style="display: none;">
                                <div class="prompt-text" id="generated-prompt">
                                    <!-- Le prompt sera g√©n√©r√© ici -->
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <script>
                let currentStep = 1;
                let formData = {};
                const totalSteps = 5;

                // Messages pour les √©crans de transition
                const transitionMessages = {
                    1: "Pr√©parez-vous √† d√©finir votre contexte commercial !",
                    2: "Parfait ! Maintenant d√©crivez votre objection...",
                    3: "Excellent ! D√©crivons maintenant le contexte de l'interaction...",
                    4: "Super ! D√©finissons votre strat√©gie de r√©ponse...",
                    5: "G√©nial ! Votre prompt personnalis√© arrive..."
                };

                // Mascottes pour chaque √©tape
                const stepMascottes = {
                    1: "mascotte_reflexion.png",
                    2: "mascotte_aide.png",
                    3: "mascotte_validation.png",
                    4: "mascotte_accueil.png"
                };

                // Messages de chargement
                const loadingMessages = [
                    "Analyse de vos r√©ponses...",
                    "Calcul des meilleures strat√©gies...",
                    "Adaptation du prompt √† votre contexte...",
                    "Optimisation des techniques de r√©ponse...",
                    "Finalisation de votre assistant expert..."
                ];

                // Labels de progression
                const progressLabels = [
                    "", // Index 0 non utilis√©
                    "Contexte g√©n√©ral",
                    "Nature de l'objection",
                    "Contexte d'interaction",
                    "Intention strat√©gique",
                    "Prompt g√©n√©r√©"
                ];

                // Fonction pour afficher une notification d'erreur
                function showNotification(message, duration = 3000) {
                    const notification = document.getElementById('notification');
                    if (notification) {
                        notification.textContent = message;
                        notification.classList.add('show');

                        setTimeout(function () {
                            notification.classList.remove('show');
                        }, duration);
                    }
                }

                // D√©marrage de l'application
                function startApp() {
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const mainContainer = document.getElementById('mainContainer');

                    if (welcomeScreen) {
                        welcomeScreen.classList.add('hidden');
                    }

                    if (mainContainer) {
                        mainContainer.style.display = 'block';
                    }

                    // Passer directement √† l'√©tape 1 avec transition
                    showTransition(1, function () {
                        currentStep = 1;
                        const step1 = document.getElementById('step-1');
                        if (step1) {
                            step1.classList.add('active');
                        }
                        updateProgress();
                    });
                }

                // Fonction pour afficher un √©cran de transition
                function showTransition(stepNumber, callback) {
                    const transitionScreen = document.getElementById('transitionScreen');
                    const transitionMascotte = document.getElementById('transitionMascotte');
                    const transitionMessage = document.getElementById('transitionMessage');

                    if (!transitionScreen || !transitionMascotte || !transitionMessage) {
                        if (callback) callback();
                        return;
                    }

                    // Configuration de la mascotte et du message
                    if (stepNumber >= 1 && stepNumber <= 4 && stepMascottes[stepNumber]) {
                        transitionMascotte.src = stepMascottes[stepNumber];
                    } else {
                        transitionMascotte.src = "mascotte_finale.png"; // Mascotte finale pour l'√©tape 5
                    }

                    if (transitionMessages[stepNumber]) {
                        transitionMessage.textContent = transitionMessages[stepNumber];
                    } else {
                        transitionMessage.textContent = "Pr√©paration de votre prompt final...";
                    }

                    // Affichage de l'√©cran de transition
                    transitionScreen.classList.add('show');

                    // Masquer apr√®s 2.5 secondes et ex√©cuter le callback
                    setTimeout(function () {
                        transitionScreen.classList.remove('show');
                        if (callback) callback();
                    }, 2500);
                }

                // Fonction pour afficher l'√©cran de chargement
                function showLoadingScreen(callback) {
                    const loadingScreen = document.getElementById('loadingScreen');
                    const progressBar = document.getElementById('progressBar');
                    const loadingMessage = document.getElementById('loadingMessage');
                    const loadingStatus = document.getElementById('loadingStatus');

                    if (!loadingScreen || !progressBar || !loadingMessage || !loadingStatus) {
                        if (callback) callback();
                        return;
                    }

                    loadingScreen.classList.add('show');

                    let progress = 0;
                    let messageIndex = 0;

                    const loadingInterval = setInterval(function () {
                        progress += Math.random() * 15 + 5; // Progression al√©atoire entre 5 et 20%

                        if (progress >= 100) {
                            progress = 100;
                            clearInterval(loadingInterval);

                            setTimeout(function () {
                                loadingScreen.classList.remove('show');
                                if (callback) callback();
                            }, 500);
                        }

                        if (progressBar) {
                            progressBar.style.width = progress + '%';
                        }

                        if (loadingStatus) {
                            loadingStatus.textContent = Math.round(progress) + '%';
                        }

                        // Changer le message toutes les 2 progressions
                        if (Math.round(progress) % 20 === 0 && messageIndex < loadingMessages.length - 1) {
                            messageIndex++;
                            if (loadingMessage) {
                                loadingMessage.textContent = loadingMessages[messageIndex];
                            }
                        }
                    }, 300);
                }

                // Mise √† jour de la mascotte accompagnatrice
                function updateCompanionMascotte() {
                    const mascotte = document.getElementById('companionMascotte');
                    if (!mascotte) return;

                    if (currentStep >= 1 && currentStep <= 4 && stepMascottes[currentStep]) {
                        mascotte.src = stepMascottes[currentStep];
                        mascotte.style.display = 'block';
                    } else {
                        mascotte.style.display = 'none';
                    }
                }

                function updateProgress() {
                    // Calcul du pourcentage bas√© sur les √©tapes 1-5
                    const percentage = currentStep <= 1 ? 0 : Math.round(((currentStep - 1) / (totalSteps - 1)) * 100);
                    const progressPercentage = document.getElementById('progressPercentage');
                    if (progressPercentage) {
                        progressPercentage.textContent = percentage + '%';
                    }

                    // Mise √† jour des √©tapes (les indices de progress-step correspondent maintenant aux √©tapes 1-5)
                    const progressSteps = document.querySelectorAll('.progress-step');
                    if (progressSteps) {
                        progressSteps.forEach(function (step, index) {
                            const stepNumber = index + 1; // Les √©tapes commencent √† 1
                            step.classList.remove('active', 'completed');
                            if (stepNumber < currentStep) {
                                step.classList.add('completed');
                            } else if (stepNumber === currentStep) {
                                step.classList.add('active');
                            }
                        });
                    }

                    // Mise √† jour du label
                    const progressLabel = document.getElementById('progressLabel');
                    if (progressLabel && progressLabels[currentStep]) {
                        progressLabel.textContent = progressLabels[currentStep];
                    }

                    updateCompanionMascotte(); // Mettre √† jour la mascotte accompagnatrice
                    updateSummary(); // Mettre √† jour le r√©sum√© des choix
                }

                function nextStep() {
                    // Validation avant de passer √† l'√©tape suivante
                    if (currentStep === 1 && !validateStep1()) return;
                    if (currentStep === 2 && !validateStep2()) return;

                    // Sauvegarder les donn√©es de l'√©tape actuelle
                    saveStepData();

                    // Masquer l'√©tape actuelle
                    const currentStepElement = document.getElementById('step-' + currentStep);
                    if (currentStepElement) {
                        currentStepElement.classList.remove('active');
                    }

                    // Si on passe de l'√©tape 4 √† 5, afficher l'√©cran de chargement
                    if (currentStep === 4) {
                        showLoadingScreen(function () {
                            currentStep++;
                            const nextStepElement = document.getElementById('step-' + currentStep);
                            if (nextStepElement) {
                                nextStepElement.classList.add('active');
                            }
                            updateProgress();
                        });
                    } else {
                        // Pour les autres transitions, utiliser l'√©cran de transition normal
                        showTransition(currentStep + 1, function () {
                            currentStep++;
                            const nextStepElement = document.getElementById('step-' + currentStep);
                            if (nextStepElement) {
                                nextStepElement.classList.add('active');
                            }
                            updateProgress();
                        });
                    }
                }

                function prevStep() {
                    if (currentStep <= 1) return;

                    // Masquer l'√©tape actuelle
                    const currentStepElement = document.getElementById('step-' + currentStep);
                    if (currentStepElement) {
                        currentStepElement.classList.remove('active');
                    }

                    currentStep--;

                    // Afficher l'√©tape pr√©c√©dente
                    const prevStepElement = document.getElementById('step-' + currentStep);
                    if (prevStepElement) {
                        prevStepElement.classList.add('active');
                    }

                    updateProgress();
                }

                function validateStep1() {
                    const selectedContext = document.querySelector('input[name="contextType"]:checked');
                    if (!selectedContext) {
                        showNotification("Veuillez s√©lectionner un type de contexte");
                        return false;
                    }
                    return true;
                }

                function validateStep2() {
                    const description = document.getElementById('objectionDescription').value.trim();
                    if (!description) {
                        showNotification("Veuillez d√©crire votre situation");
                        return false;
                    }

                    const selectedTypes = document.querySelectorAll('input[name="objectionTypes"]:checked');
                    if (selectedTypes.length === 0) {
                        showNotification("Veuillez s√©lectionner au moins un type d'objection");
                        return false;
                    }

                    return true;
                }

                function saveStepData() {
                    // Sauvegarder les donn√©es de l'√©tape actuelle
                    switch (currentStep) {
                        case 1:
                            const contextType = document.querySelector('input[name="contextType"]:checked');
                            if (contextType) {
                                formData.contextType = contextType.value;
                                updateStep2Content();
                            }
                            break;
                        case 2:
                            formData.objectionDescription = document.getElementById('objectionDescription').value;
                            formData.objectionTypes = Array.from(document.querySelectorAll('input[name="objectionTypes"]:checked'))
                                .map(cb => cb.value);
                            const otherObjection = document.getElementById('otherObjection');
                            if (otherObjection && otherObjection.value.trim()) {
                                formData.otherObjection = otherObjection.value.trim();
                            }
                            break;
                        case 3:
                            formData.channel = document.getElementById('channel').value;
                            formData.phase = document.getElementById('phase').value;
                            formData.prospectRole = document.getElementById('prospectRole').value;
                            formData.prospectAuthority = document.getElementById('prospectAuthority').value;
                            formData.prospectTemperature = document.getElementById('prospectTemperature').value;
                            break;
                        case 4:
                            if (formData.contextType === 'objection') {
                                formData.responseDraft = document.getElementById('responseDraft').value;
                                formData.strategies = Array.from(document.querySelectorAll('input[name="strategies"]:checked'))
                                    .map(cb => cb.value);
                            } else {
                                formData.prospectionScript = document.getElementById('prospectionScript').value;
                                formData.prospectionGoals = Array.from(document.querySelectorAll('input[name="prospectionGoal"]:checked'))
                                    .map(cb => cb.value);
                            }
                            break;
                    }
                }

                function updateStep2Content() {
                    const subtitle = document.getElementById('step2-subtitle');
                    const label = document.getElementById('objectionDescriptionLabel');
                    const placeholder = document.getElementById('objectionDescription');

                    if (formData.contextType === 'objection') {
                        if (subtitle) subtitle.textContent = "D√©crivez l'objection que vous rencontrez et s√©lectionnez les types pertinents";
                        if (label) label.textContent = "Quelles sont les objections auxquelles vous faites face ? :";
                        if (placeholder) placeholder.placeholder = "√âcrivez ici, l'objection (ou les objections) qu'on vous fait trop souvent, expliquez ce que vous essayez de dire avant, √™tes vous a l'aise dans la conversation, collez ici une phrase-type de client...";
                    } else {
                        if (subtitle) subtitle.textContent = "D√©crivez votre contexte de prospection et s√©lectionnez les types d'objections que vous retoutez";
                        if (label) label.textContent = "Quel est votre contexte de prospection ?";
                        if (placeholder) placeholder.placeholder = "Collez ici votre pitch, d√©crivez votre produit/service, vos cibles et pourquoi eux, quels sont vos avantages...";
                    }
                }

                function updateStep4Content() {
                    const title = document.getElementById('step4-title');
                    const subtitle = document.getElementById('step4-subtitle');
                    const objectionContent = document.getElementById('objectionPathContent');
                    const prospectionContent = document.getElementById('prospectionPathContent');

                    if (formData.contextType === 'objection') {
                        if (title) title.textContent = "Votre strat√©gie de r√©ponse";
                        if (subtitle) subtitle.textContent = "R√©digez votre r√©ponse et s√©lectionnez les strat√©gies √† utiliser";
                        if (objectionContent) objectionContent.style.display = 'block';
                        if (prospectionContent) prospectionContent.style.display = 'none';
                    } else {
                        if (title) title.textContent = "Votre script de prospection";
                        if (subtitle) subtitle.textContent = "√âcrivez votre script et d√©finissez votre objectif";
                        if (objectionContent) objectionContent.style.display = 'none';
                        if (prospectionContent) prospectionContent.style.display = 'block';
                    }
                }

                function selectRadio(name, value) {
                    // D√©s√©lectionner toutes les options du m√™me groupe
                    document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                        radio.checked = false;
                        radio.closest('.radio-option').classList.remove('selected');
                    });

                    // S√©lectionner l'option choisie
                    const selectedRadio = document.querySelector(`input[name="${name}"][value="${value}"]`);
                    if (selectedRadio) {
                        selectedRadio.checked = true;
                        selectedRadio.closest('.radio-option').classList.add('selected');
                    }

                    // G√©rer les champs conditionnels
                    if (name === 'objectionType' && value === 'autre') {
                        const otherField = document.getElementById('otherObjectionField');
                        if (otherField) {
                            otherField.classList.add('show');
                        }
                    } else if (name === 'objectionType') {
                        const otherField = document.getElementById('otherObjectionField');
                        if (otherField) {
                            otherField.classList.remove('show');
                        }
                    }
                }

                function toggleCheckbox(name, value) {
                    const checkbox = document.querySelector(`input[name="${name}"][value="${value}"]`);
                    if (checkbox) {
                        checkbox.checked = !checkbox.checked;
                        const option = checkbox.closest('.checkbox-option');
                        if (checkbox.checked) {
                            option.classList.add('selected');
                        } else {
                            option.classList.remove('selected');
                        }
                    }

                    // G√©rer l'affichage du champ "autre" pour les types d'objection
                    if (name === 'objectionTypes') {
                        const otherField = document.getElementById('otherObjectionField');
                        const selectedTypes = document.querySelectorAll('input[name="objectionTypes"]:checked');
                        if (selectedTypes.length === 0) {
                            showNotification("S√©lectionnez au moins un type d'objection");
                            checkbox.checked = true;
                            checkbox.closest('.checkbox-option').classList.add('selected');
                        }
                    }
                }

                function generatePrompt() {
                    // Sauvegarder les donn√©es de l'√©tape 4
                    saveStepData();

                    // Valider les champs requis pour l'√©tape 4
                    if (formData.contextType === 'objection') {
                        if (!formData.responseDraft || formData.responseDraft.trim() === '') {
                            showNotification("Veuillez r√©diger votre r√©ponse");
                            return;
                        }
                        if (!formData.strategies || formData.strategies.length === 0) {
                            showNotification("Veuillez s√©lectionner au moins une strat√©gie");
                            return;
                        }
                    } else {
                        if (!formData.prospectionScript || formData.prospectionScript.trim() === '') {
                            showNotification("Veuillez √©crire votre script de prospection");
                            return;
                        }
                        if (!formData.prospectionGoals || formData.prospectionGoals.length === 0) {
                            showNotification("Veuillez s√©lectionner au moins un objectif principal");
                            return;
                        }
                    }

                    // G√©n√©rer le prompt en fonction du contexte
                    let prompt = "";

                    if (formData.contextType === 'objection') {
                        prompt = generateObjectionPrompt();
                    } else {
                        prompt = generateProspectionPrompt();
                    }

                    // Afficher le prompt g√©n√©r√©
                    const promptElement = document.getElementById('generated-prompt');
                    if (promptElement) {
                        promptElement.textContent = prompt;
                    }

                    // Passer √† l'√©tape 5
                    nextStep();
                }

                function generateObjectionPrompt() {
                    const objectionTypeLabels = {
                        'prix': 'Prix/co√ªt',
                        'delai': 'D√©lai/temps',
                        'confiance': 'Manque de confiance',
                        'besoin': 'Besoin flou',
                        'autorite': 'Manque d\'autorit√©',
                        'urgence': 'Absence d\'urgence'
                    };

                    const strategyLabels = {
                        'desamorcer': 'D√©samorcer calmement',
                        'reformuler': 'Reformuler pour comprendre',
                        'contre-argumenter': 'Contre-argumenter',
                        'diagnostiquer': 'Diagnostiquer la cause racine',
                        'relational': 'Renforcer la relation',
                        'urgent': 'Cr√©er un sentiment d\'urgence'
                    };

                    const selectedTypes = formData.objectionTypes.map(type => objectionTypeLabels[type] || type).join(', ');
                    const selectedStrategies = formData.strategies.map(strategy => strategyLabels[strategy] || strategy).join(', ');

                    let prompt = `Tu es un expert en traitement des objections commerciales avec une ma√Ætrise approfondie des techniques de vente, de la psychologie client et des strat√©gies de persuasion.

CONTEXTE DE L'OBJECTION :
- Type d'objection(s) : ${selectedTypes}${formData.otherObjection ? ', ' + formData.otherObjection : ''}
- Description d√©taill√©e : "${formData.objectionDescription}"
- Canal de communication : ${formData.channel}
- Phase du cycle de vente : ${formData.phase}
- R√¥le du prospect : ${formData.prospectRole}
- Niveau d'autorit√© : ${formData.prospectAuthority}
- Temp√©rature du prospect : ${formData.prospectTemperature}

MON AMBITION ET PLAN D'ACTION :
"${formData.responseDraft}"

STRAT√âGIES QUE JE SOUHAITE UTILISER :
${selectedStrategies}

TAKE MISSION :
Agis comme un coach expert en vente. Analyse mon objection et mon objectif actuel, puis fournis-moi une strat√©gie compl√®te et optimis√©e en suivant ces √©tapes :

1. ANALYSE PSYCHOLOGIQUE APPROFONDIE :
   - Identifie les √©motions sous-jacentes du prospect (peur, doute, m√©fiance, etc.)
   - Rep√®re les biais cognitifs en jeu (aversion √† la perte, statu quo, etc.)
   - D√©termine le v√©ritable besoin non exprim√© derri√®re l'objection

2. √âVALUATION DE MA R√âPONSE ACTUELLE :
   - Points forts de mon approche
   - Points faibles et risques potentiels
   - Opportunit√©s manqu√©es

3. STRAT√âGIE OPTIMIS√âE :
   Pour chaque strat√©gie s√©lectionn√©e (${selectedStrategies}), fournis :
   - Une explication d√©taill√©e de pourquoi elle est pertinente ici
   - Des phrases types concr√®tes et adapt√©es √† la situation
   - Le timing id√©al pour utiliser chaque strat√©gie
   - Les signaux √† observer chez le prospect

4. PLAN D'ACTION CONCRET :
   - Un script de r√©ponse am√©lior√© int√©grant toutes les strat√©gies
   - Des questions de suivi pour maintenir le dialogue
   - Des sc√©narios de r√©ponses possibles du prospect et comment y r√©agir

5. MESURES DE SUCC√àS :
   - Indicateurs √† observer pour savoir si la strat√©gie fonctionne
   - Points de bascule pour ajuster l'approche
   - Prochaines √©tapes recommand√©es

Format de r√©ponse : Sois direct, pratique et actionnable. Utilise des exemples concrets et un langage clair. Structure ta r√©ponse avec des en-t√™tes clairs et des listes √† puces pour une lecture facile.`;

                    return prompt;
                }

                function generateProspectionPrompt() {
                    const goalLabels = {
                        'rdv': 'Obtenir un rendez-vous',
                        'info': 'Fournir des informations',
                        'demo': 'Obtenir une d√©monstration',
                        'vente': 'Conclure une vente directe'
                    };

                    const objectionTypeLabels = {
                        'prix': 'Prix/co√ªt',
                        'delai': 'D√©lai/temps',
                        'confiance': 'Manque de confiance',
                        'besoin': 'Besoin flou',
                        'autorite': 'Manque d\'autorit√©',
                        'urgence': 'Absence d\'urgence'
                    };

                    const selectedTypes = formData.objectionTypes.map(type => objectionTypeLabels[type] || type).join(', ');
                    const goalText = formData.prospectionGoals && formData.prospectionGoals.length > 0
                        ? formData.prospectionGoals.map(g => goalLabels[g] || g).join(', ')
                        : '';

                    let prompt = `Tu es un expert en prospection commerciale et en anticipation des objections. Tu ma√Ætrises les techniques de vente, la psychologie client et l'analyse critique des scripts commerciaux.

CONTEXTE DE PROSPECTION :
- Types d'objections √† anticiper : ${selectedTypes}${formData.otherObjection ? ', ' + formData.otherObjection : ''}
- Description du contexte : "${formData.objectionDescription}"
- Canal de communication : ${formData.channel}
- Phase du cycle de vente : ${formData.phase}
- R√¥le du prospect cibl√© : ${formData.prospectRole}
- Niveau d'autorit√© attendu : ${formData.prospectAuthority}
- Temp√©rature du prospect : ${formData.prospectTemperature}

OBJECTIF PRINCIPAL : ${goalText}

MON SCRIPT DE PROSPECTION, PITCH OU FIL ROUGE :
"${formData.prospectionScript}"

TAKE MISSION :
Agis comme un expert en prospection. Analyse mon script et mon contexte, puis fournis une analyse compl√®te et des recommandations en suivant ces √©tapes :

1. ANALYSE CRITIQUE DU SCRIPT :
   - Points forts et √©l√©ments percutants
   - Faiblesses et zones de friction potentielles
   - Manques et opportunit√©s d'am√©lioration

2. IDENTIFICATION DES LACUNES ET POINTS SENSIBLES :
   - Rep√®re les phrases ou formulations qui pourraient g√©n√©rer des objections
   - Identifie les informations manquantes qui cr√©eraient des doutes
   - Signale les √©l√©ments qui pourraient para√Ætre trop agressifs ou pas assez cr√©dibles

3. ANTICIPATION DES OBJECTIONS SP√âCIFIQUES :
   Pour chaque type d'objection s√©lectionn√© (${selectedTypes}), analyse :
   - Quelle partie de mon script est susceptible de d√©clencher cette objection
   - Quelle serait la formulation probable de l'objection par le prospect
   - Quel est le niveau de risque associ√© (√©lev√©, moyen, faible)

4. PERSPECTIVE CLIENT SCEPTIQUE :
   Mets-toi dans la peau d'un prospect sceptique et r√©ponds √† mon script comme le ferait un client difficile :
   - Quelles questions te poserais-tu ?
   - Quelles objections formulerais-tu en premier ?
   - Quels √©l√©ments te mettraient en garde ou te rendraient m√©fiant ?

5. RECOMMANDATIONS D'AM√âLIORATION :
   - Suggestions concr√®tes pour renforcer le script
   - Reformulations des phrases probl√©matiques
   - Ajouts recommand√©s pour anticiper les objections
   - Structure optimis√©e pour mon objectif (${goalText})

6. SCRIPT AM√âLIOR√â :
   Fournis une version am√©lior√©e de mon script qui :
   - Int√®gre toutes tes recommandations
   - Anticipe naturellement les objections principales
   - Maintient un flux conversationnel fluide
   - Est optimis√© pour l'objectif vis√©

Format de r√©ponse : Sois critique mais constructif. Utilise des exemples pr√©cis tir√©s de mon script. Propose des alternatives concr√®tes et justifie tes recommandations avec des principes de persuasion √©prouv√©s.`;

                    return prompt;
                }

                function copyPrompt() {
                    const promptText = document.getElementById('generated-prompt').textContent;
                    if (navigator.clipboard && window.isSecureContext) {
                        navigator.clipboard.writeText(promptText).then(function () {
                            showCopySuccess();
                        }).catch(function () {
                            fallbackCopy(promptText);
                        });
                    } else {
                        fallbackCopy(promptText);
                    }
                }

                function fallbackCopy(text) {
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    textarea.setAttribute('readonly', '');
                    textarea.style.position = 'absolute';
                    textarea.style.left = '-9999px';
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        document.execCommand('copy');
                        showCopySuccess();
                    } catch (err) {
                        showNotification("Erreur lors de la copie du prompt");
                    }
                    document.body.removeChild(textarea);
                }

                function showCopySuccess() {
                    const copyBtn = document.querySelector('.copy-btn');
                    if (copyBtn) {
                        copyBtn.textContent = '‚úÖ Charg√© !';
                        copyBtn.classList.add('copied');
                        setTimeout(function () {
                            copyBtn.textContent = 'Charger configuration';
                            copyBtn.classList.remove('copied');
                        }, 2000);
                    }
                }

                function restart() {
                    // R√©initialiser les donn√©es
                    formData = {};
                    currentStep = 1;

                    // R√©initialiser tous les formulaires
                    document.querySelectorAll('input, select, textarea').forEach(element => {
                        if (element.type === 'radio' || element.type === 'checkbox') {
                            element.checked = false;
                        } else {
                            element.value = '';
                        }
                    });

                    // R√©initialiser les s√©lections visuelles
                    document.querySelectorAll('.radio-option, .checkbox-option').forEach(option => {
                        option.classList.remove('selected');
                    });

                    // Masquer les champs conditionnels
                    document.querySelectorAll('.conditional-field').forEach(field => {
                        field.classList.remove('show');
                    });

                    // Revenir √† l'√©tape 1
                    document.querySelectorAll('.step').forEach(step => {
                        step.classList.remove('active');
                    });

                    const step1 = document.getElementById('step-1');
                    if (step1) {
                        step1.classList.add('active');
                    }

                    updateProgress();
                }

                function updateSummary() {
                    const summaryContent = document.getElementById('summary-content');
                    if (!summaryContent) return;

                    let summaryHTML = '<div style="display: grid; gap: 10px;">';

                    // √âtape 1
                    if (formData.contextType) {
                        summaryHTML += `
                    <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 6px;">
                        <strong>Contexte :</strong> ${formData.contextType === 'objection' ? 'Objection actuelle' : 'Pr√©paration de prospection'}
                    </div>
                `;
                    }

                    // √âtape 2
                    if (formData.objectionDescription) {
                        summaryHTML += `
                    <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 6px;">
                        <strong>Description :</strong> ${formData.objectionDescription.substring(0, 100)}${formData.objectionDescription.length > 100 ? '...' : ''}
                    </div>
                `;
                    }

                    if (formData.objectionTypes && formData.objectionTypes.length > 0) {
                        const typeLabels = {
                            'prix': 'Prix',
                            'delai': 'D√©lai',
                            'confiance': 'Confiance',
                            'besoin': 'Besoin',
                            'autorite': 'Autorit√©',
                            'urgence': 'Urgence'
                        };
                        const typesText = formData.objectionTypes.map(type => typeLabels[type] || type).join(', ');
                        summaryHTML += `
                    <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 6px;">
                        <strong>Types d'objections :</strong> ${typesText}
                    </div>
                `;
                    }

                    // √âtape 3
                    if (formData.channel) {
                        summaryHTML += `
                    <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 6px;">
                        <strong>Canal :</strong> ${formData.channel}
                    </div>
                `;
                    }

                    if (formData.phase) {
                        summaryHTML += `
                    <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 6px;">
                        <strong>Phase :</strong> ${formData.phase}
                    </div>
                `;
                    }

                    // √âtape 4
                    if (formData.contextType === 'objection' && formData.strategies) {
                        const strategyLabels = {
                            'desamorcer': 'D√©samorcer',
                            'reformuler': 'Reformuler',
                            'contre-argumenter': 'Contre-argumenter',
                            'diagnostiquer': 'Diagnostiquer',
                            'relational': 'Relation',
                            'urgent': 'Urgence'
                        };
                        const strategiesText = formData.strategies.map(strategy => strategyLabels[strategy] || strategy).join(', ');
                        summaryHTML += `
                    <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 6px;">
                        <strong>Strat√©gies :</strong> ${strategiesText}
                    </div>
                `;
                    } else if (formData.contextType === 'prospection' && formData.prospectionGoals && formData.prospectionGoals.length > 0) {
                        const goalLabels = {
                            'rdv': 'Rendez-vous',
                            'info': 'Informations',
                            'demo': 'D√©monstration',
                            'vente': 'Vente directe'
                        };
                        const goalsText = formData.prospectionGoals.map(g => goalLabels[g] || g).join(', ');
                        summaryHTML += `
        <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 6px;">
            <strong>Objectifs :</strong> ${goalsText}
        </div>
    `;
                    }

                    summaryHTML += '</div>';
                    summaryContent.innerHTML = summaryHTML;
                }

                // Mettre √† jour le contenu de l'√©tape 4 quand on y arrive
                document.addEventListener('DOMContentLoaded', function () {
                    // Observer les changements d'√©tape pour mettre √† jour le contenu de l'√©tape 4
                    const observer = new MutationObserver(function (mutations) {
                        mutations.forEach(function (mutation) {
                            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                                const step4 = document.getElementById('step-4');
                                if (step4 && step4.classList.contains('active')) {
                                    updateStep4Content();
                                }
                            }
                        });
                    });

                    // Observer l'√©tape 4
                    const step4 = document.getElementById('step-4');
                    if (step4) {
                        observer.observe(step4, { attributes: true });
                    }
                });
            </script>
</body>

</html>